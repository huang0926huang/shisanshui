<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>开启战局</title>
	
<style>
	#quitgame{
	border-radius: 18px;
	color:maroon;
	font-size: 22pt;
	height: 50px;
	width: 150px;
	text-align:center;
	margin-left:820px;
	margin-top:20px;
	}
	body{
		width:1000px;
		height: 560px;
		background:url("gamebegin20191023162444.png");
	    background-repeat: no-repeat;
	}	
	
</style>	
</head>

<body>
	<button type="button" id="quitgame" onclick="javascript:window.location.href='首页.html'">退出游戏</button>
	<div id="div1">
		
	</div>
<script>
window.onload=function(){
	var xhr = new XMLHttpRequest();
	xhr.onreadystatechange=function(){
		if(xhr.readyState==4&&xhr.status==200){
			json=JSON.parse(xhr.responseText);
			console.log(xhr.responseText);
			var str=json.data.card.split(" ");
			alert("开始"); 
			console.log(str);
			for(var i=0;i<str.length;i++)
			{
				var s=str[i].split("");

				if(s[0]=="$"){ //命名为 $5
						document.getElementById("div1").innerHTML+="<img width='70' style='position:fixed;bottom:25%;left:(5+i*5)%;' draggable='true' id='b"+s[1]+"'  scr='"+str[i]+".png'>";

				}
				else if(s[0]=="&"){//爱心命名为 a2							
						document.getElementById("div1").innerHTML+="<img width='70' style='position:fixed;bottom:25%;left:(5+i*5)%;' draggable='true' id='a"+s[1]+"'  scr='a"+s[1]+".png'>";
		
				}
				else if(s[0]=="#"){//命名为poker3/4					
						document.getElementById("div1").innerHTML+="<img  width='70' style='position:fixed;bottom:25%;left:(5+i*5)%;' draggable='true' id='d"+str[i]+"'  scr='./poker3/"+s[1]+".png'>";
							
				}
				else if(s[0]=="*"){//命名为 poker4/1
						document.getElementById("div1").innerHTML+="<img width='70'  draggable='true' id='c"+s[1]+s[2]+"'  src='./poker4/"+s[1]+".png'>";
				}
				console.log(document.getElementById("div1").innerHTML);
				
			}
		}
	}
	xhr.open("POST", "http://api.revth.com/game/open",true);
	xhr.setRequestHeader("x-auth-token",localStorage.getItem("token")); 
	//xhr.setRequestHeader("content-type", "application/json");
	xhr.send();
	/*var ws = new ActiveXObject("WScript.Shell");
	ws.run("python shisanshui.py"+json.data.card);*/
	
	
	/*        function my(){
            var obj;
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange=function(){
                if(xhr.readyState==4&&xhr.status==200){
                    var json=xhr.responseText;
                    console.log(json);
                    obj=JSON.parse(xhr.responseText);
                    if(obj.data==""){alert("玩家您无历史战绩或历史记录已全部显示")}
                    function getJsonLength(json){
                        var l=0;
                        for(var j in json.data){

                            document.getElementById("demo").innerHTML+='<tr><td style="width: 8%">'+json.data[l].id+'</td><td style="width: 66%;">'
                                +json.data[l].card+'</td><td style="width: 10%">'+json.data[l].score+'</td><td style="width: 21%">'+json.data[l].timestamp+'</td></tr>';
                            l++;
                        }
                    }
                    getJsonLength(obj);
                }
            }
            xhr.open("GET", "https://api.shisanshui.rtxux.xyz/history?page="+x+"&limit=15&player_id="+localStorage.getItem("user_id"),true);
            xhr.setRequestHeader("X-Auth-Token",localStorage.getItem("token"));
            xhr.send();
        }*/

}
 </script>	
</body>
</html>
